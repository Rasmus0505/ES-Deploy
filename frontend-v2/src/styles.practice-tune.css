/* Tuned overrides for listening practice: immersive readability + neutral cinematic rhythm. */
.page-listening-practice {
  grid-template-rows: minmax(0, 54vh) auto minmax(0, 1fr);
  gap: 0;
}

.practice-video-heading {
  width: min(760px, 100%);
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(170px, 240px);
  align-items: center;
  gap: 12px;
}

.practice-video-heading__title {
  font-size: clamp(1rem, 0.96rem + 0.2vw, 1.1rem);
  font-weight: 700;
  letter-spacing: 0.01em;
}

.practice-video-heading__meta {
  display: grid;
  gap: 5px;
  justify-items: end;
}

.practice-video-heading__sentence {
  font-size: 12px;
  line-height: 1.2;
  color: hsl(var(--muted-foreground));
  white-space: nowrap;
}

.practice-video-heading__progress.ui-progress {
  width: 100%;
  height: 3px;
  border: 0;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.2);
}

.practice-video-heading__progress .ui-progress__fill {
  background: linear-gradient(90deg, rgba(250, 250, 250, 0.94) 0%, rgba(196, 196, 196, 0.88) 100%);
}

.page-listening-practice .practice-video-card .ui-card__subtitle {
  margin: 0;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  pointer-events: none;
}

.practice-video-actions {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.practice-video-input-divider {
  width: min(1240px, calc(100% - 28px));
  height: 14px;
  margin: 0 auto;
  border-radius: 999px;
  background:
    linear-gradient(180deg, rgba(255, 255, 255, 0.1), transparent),
    linear-gradient(90deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.01) 36%, rgba(255, 255, 255, 0.08) 100%);
  border: 1px solid rgba(255, 255, 255, 0.09);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
  transform: translateY(-1px);
}

.practice-input-center {
  width: min(1240px, 100%);
  gap: 14px;
  justify-items: stretch;
}

.practice-word-grid {
  gap: 10px;
}

.practice-word-grid.mode-sentence {
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
}

.practice-word-grid.mode-word {
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
}

.practice-word-item {
  border-radius: 11px;
  padding: 9px;
  gap: 7px;
}

.practice-word-item.is-current {
  border-color: rgba(242, 242, 242, 0.72);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.13), 0 10px 22px rgba(0, 0, 0, 0.34);
}

.practice-word-item.is-current .practice-word-input-shell,
.practice-word-input-shell:focus-within {
  border-color: rgba(248, 248, 248, 0.88);
  box-shadow: 0 0 0 2px rgba(242, 242, 242, 0.36), 0 0 18px rgba(255, 255, 255, 0.2);
}

.practice-word-item.is-current .practice-word-input-native {
  animation: practice-caret-pulse 1.08s ease-in-out infinite;
}

.practice-word-input-shell {
  min-height: 46px;
  border-radius: 9px;
  padding: 0 10px;
}

.practice-word-input-overlay,
.practice-word-input-native {
  height: 46px;
  font-size: clamp(17px, 1.35vw, 21px);
  letter-spacing: 0.013em;
}

.practice-revealed-typed {
  min-height: 21px;
  padding: 3px 8px;
  font-size: 12px;
}

.practice-live-feedback {
  width: min(1020px, 100%);
  margin: 0 auto;
  text-align: left;
}

.practice-previous-strip {
  width: 100%;
  margin: 0 auto;
  display: grid;
  gap: 5px;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid rgba(196, 196, 196, 0.38);
  background: linear-gradient(180deg, rgba(26, 26, 27, 0.82) 0%, rgba(16, 16, 17, 0.88) 100%);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06), 0 10px 22px rgba(0, 0, 0, 0.32);
  backdrop-filter: blur(4px);
  text-align: left;
}

.practice-previous-strip__source {
  margin: 0;
  line-height: 1.58;
  font-size: 1.01rem;
  font-weight: 640;
  color: rgba(247, 247, 247, 0.98);
}

.practice-previous-strip__translation {
  margin: 0;
  line-height: 1.58;
  font-size: 0.94rem;
  color: rgba(222, 222, 222, 0.96);
}

.practice-previous-strip .is-placeholder {
  color: rgba(180, 180, 180, 0.78);
}

.practice-shortcut-panel {
  justify-self: center;
}

@keyframes practice-caret-pulse {
  0%,
  100% {
    caret-color: rgba(255, 255, 255, 0.95);
  }

  50% {
    caret-color: rgba(255, 255, 255, 0.4);
  }
}

body.listening-immersive-active .page-listening-practice.is-immersive {
  grid-template-rows: minmax(0, 57vh) auto minmax(0, 43vh);
  background: linear-gradient(180deg, #080809 0%, #060607 52%, #040405 100%);
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-video-card,
body.listening-immersive-active .page-listening-practice.is-immersive .practice-input-card {
  border: 0;
  border-radius: 0;
  box-shadow: none;
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-video-card {
  background: #030303;
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-input-card {
  background: rgba(7, 7, 8, 0.96);
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-video-actions .ui-badge {
  display: none;
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-input-card [data-slot='card-header'] .ui-card__subtitle,
body.listening-immersive-active .page-listening-practice.is-immersive .practice-live-feedback,
body.listening-immersive-active .page-listening-practice.is-immersive .practice-reveal-hint,
body.listening-immersive-active .page-listening-practice.is-immersive .practice-aux-info,
body.listening-immersive-active .page-listening-practice.is-immersive .practice-shortcut-panel {
  display: none;
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-input-center {
  width: min(1280px, 100%);
  gap: 12px;
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-word-grid.mode-sentence {
  grid-template-columns: repeat(auto-fill, minmax(124px, 1fr));
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-word-grid.mode-word {
  grid-template-columns: repeat(auto-fill, minmax(154px, 1fr));
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-word-input-shell {
  min-height: 52px;
  background: rgba(20, 20, 21, 0.86);
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-word-input-overlay,
body.listening-immersive-active .page-listening-practice.is-immersive .practice-word-input-native {
  height: 52px;
  font-size: clamp(20px, 1.9vw, 24px);
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-previous-strip {
  border-color: rgba(224, 224, 224, 0.44);
  background: linear-gradient(180deg, rgba(10, 10, 11, 0.9) 0%, rgba(16, 16, 17, 0.9) 100%);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 10px 20px rgba(0, 0, 0, 0.38);
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-previous-strip__source {
  color: rgba(255, 255, 255, 0.98);
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-previous-strip__translation {
  color: rgba(220, 220, 220, 0.95);
}

body.listening-immersive-active .page-listening-practice.is-immersive .practice-previous-strip .is-placeholder {
  color: rgba(175, 175, 175, 0.82);
}

@media (max-width: 900px) {
  .page-listening-practice {
    grid-template-rows: minmax(0, 50vh) auto minmax(0, 1fr);
  }

  .practice-video-heading {
    grid-template-columns: 1fr;
    gap: 7px;
  }

  .practice-video-heading__meta {
    justify-items: start;
  }
}

@media (max-width: 760px) {
  .practice-input-center {
    gap: 11px;
  }

  .practice-video-input-divider {
    width: calc(100% - 20px);
    height: 12px;
  }

  .practice-previous-strip {
    padding: 10px 12px;
    border-radius: 10px;
    gap: 4px;
  }

  .practice-previous-strip__source {
    font-size: 0.98rem;
  }

  .practice-previous-strip__translation {
    font-size: 0.9rem;
  }

  .practice-word-grid.mode-sentence,
  .practice-word-grid.mode-word {
    grid-template-columns: 1fr;
  }
}
